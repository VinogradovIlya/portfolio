{% extends 'frontend/base.html' %}

{% block title %}–ü–æ—Å—Ç—ã {{ posts_user.profile.full_name|default:posts_user.email }} - Pet Social Network{% endblock %}

{% block content %}
<div class="container" style="padding: 2rem 0;">
    <div style="margin-bottom: 2rem;">
        <h1>–ü–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ posts_user.profile.full_name|default:posts_user.email }}</h1>
        <p class="text-muted">–í—Å–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∞</p>
    </div>

    {% if posts %}
        <div class="posts-feed">
            {% for post in posts %}
                <article class="post-card">
                    <div class="post-card__header">
                        <div class="post-author">
                            {% if post.author.profile.avatar %}
                                <img src="{{ post.author.profile.avatar.url }}" alt="{{ post.author.profile.full_name }}" class="post-author__avatar">
                            {% else %}
                                <div class="post-author__avatar post-author__avatar--placeholder">
                                    {{ post.author.profile.first_name.0|default:post.author.email.0|upper }}
                                </div>
                            {% endif %}
                            
                            <div class="post-author__info">
                                <div class="post-author__name">
                                    {{ post.author.profile.full_name|default:post.author.email }}
                                </div>
                                <time class="post-date">{{ post.created_at|date:"d.m.Y H:i" }}</time>
                            </div>
                        </div>
                    </div>
                    
                    <div class="post-card__content">
                        <p class="post-content">{{ post.content }}</p>
                        
                        <!-- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∫ –ø–æ—Å—Ç—É -->
                        {% if post.photos.all %}
                            <div class="post-photos">
                                {% for photo in post.photos.all %}
                                    <img src="{{ photo.photo.url }}" alt="–§–æ—Ç–æ –∫ –ø–æ—Å—Ç—É" class="post-photo">
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    
                    <div class="post-card__actions">
                        <div class="post-actions">
                            <span class="post-action">
                                <span class="post-action__icon">üëç</span>
                                <span class="post-action__count">{{ post.likes_count }}</span>
                            </span>
                            
                            <span class="post-action">
                                <span class="post-action__icon">üëé</span>
                                <span class="post-action__count">{{ post.dislikes_count }}</span>
                            </span>
                            
                            <span class="post-action">
                                <span class="post-action__icon">üí¨</span>
                                <span class="post-action__count">{{ post.comments_count_actual }}</span>
                            </span>
                        </div>
                    </div>
                </article>
            {% endfor %}
        </div>
        
        <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
        {% if posts.has_other_pages %}
            <div class="pagination-wrapper">
                <div class="pagination">
                    {% if posts.has_previous %}
                        <a href="?page={{ posts.previous_page_number }}" class="pagination__link">‚Äπ –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
                    {% endif %}
                    
                    <span class="pagination__current">
                        –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ posts.number }} –∏–∑ {{ posts.paginator.num_pages }}
                    </span>
                    
                    {% if posts.has_next %}
                        <a href="?page={{ posts.next_page_number }}" class="pagination__link">–°–ª–µ–¥—É—é—â–∞—è ‚Ä∫</a>
                    {% endif %}
                </div>
            </div>
        {% endif %}
        
    {% else %}
        <div class="empty-state">
            <div class="empty-state__icon">üìù</div>
            <h3 class="empty-state__title">–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤</h3>
            <p>{{ posts_user.profile.full_name|default:posts_user.email }} –µ—â–µ –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø–æ—Å—Ç–∞.</p>
            <a href="{% url 'frontend:posts_feed' %}" class="btn btn-primary" style="margin-top: 1rem;">
                –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ª–µ–Ω—Ç–µ
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}